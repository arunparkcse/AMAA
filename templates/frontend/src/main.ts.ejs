import { enableProdMode, importProvidersFrom } from '@angular/core';
import { bootstrapApplication } from '@angular/platform-browser';
import { provideRouter } from '@angular/router';
import { provideHttpClient, withInterceptorsFromDi } from '@angular/common/http';
import { AppComponent } from './app/app.component';
import { routes } from './app/app-routing.module';
<% if (schema.enableAdmin) { %>
import { NbThemeModule, NbLayoutModule } from '@nebular/theme';
<% } %>
<% if (schema.enableGraphQL) { %>
import { provideApollo } from 'apollo-angular';
import { HttpLink } from 'apollo-angular/http';
import { InMemoryCache } from '@apollo/client/core';
<% } %>

import { environment } from './environments/environment';

if (environment.production) enableProdMode();

bootstrapApplication(AppComponent, {
  providers: [
    provideRouter(routes),
    provideHttpClient(withInterceptorsFromDi()),
    <% if (schema.enableAdmin) { %>
    importProvidersFrom(NbThemeModule.forRoot({ name: 'default' }), NbLayoutModule),
    <% } %>
    <% if (schema.enableGraphQL) { %>
    provideApollo(() => {
      const httpLink = new HttpLink({ uri: '/graphql' });
      return { link: httpLink, cache: new InMemoryCache() };
    }),
    <% } %>
  ]
}).catch(err => console.error(err));